<app-blank pageName="Çalışma Takvimim">
  <section class="content">
          <!-- Takvim -->
          <div class="row mt-3">
            <div class="col-md-12">
              <div class="card">
                <div class="card-header">
                  <h3 class="card-title"><i class="fas fa-calendar-alt mr-1"></i> Takvim</h3>
                  <div class="card-tools">
                    <button type="button" class="btn btn-tool" data-card-widget="collapse">
                      <i class="fas fa-minus"></i>
                    </button>
                    <button type="button" class="btn btn-tool" data-card-widget="remove">
                      <i class="fas fa-times"></i>
                    </button>
                  </div>
                </div>
                <div class="card-body">
                  <full-calendar [options]="calendarOptions"></full-calendar>
                  <button class="btn btn-primary mt-3" data-toggle="modal" data-target="#addModal">Ekle</button>
                </div>
              </div>
            </div>
          </div>

              <!--Update Modal -->
<div class="modal fade" id="eventModal" tabindex="-1" aria-labelledby="eventModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="eventModalLabel">Event Details</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="appointmentUpdateForm">
          <div class="form-group">
            <label for="day">Gün</label>
            <input type="datetime-local" class="form-control" [min]="minDateTime" id="day" formControlName="intervalDate">
            <div *ngIf="appointmentUpdateForm.controls.intervalDate.invalid && (appointmentUpdateForm.controls.intervalDate.dirty || appointmentUpdateForm.controls.intervalDate.touched)" class="text-danger">
              Gün zorunludur ve bugünden önce olamaz.
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Kapat</button>
        <button type="button" class="btn btn-danger" (click)="deleteAppointmentInterval(selectedEvent.id)">Sil</button>
        <button type="button" class="btn btn-success" (click)="updateAppointmetnInterval()">Güncelle</button>
      </div>
    </div>
  </div>
</div>

    <!-- Add Modal -->
    <div
      class="modal fade"
      id="addModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="addModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="addModalLabel">
              <i class="fas fa-plus-circle"></i> Çalışma Programı Oluştur
            </h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form [formGroup]="appointmentAddForm">
              <div class="form-group">
                <label for="day">Gün</label>
                <input type="date" class="form-control" [min]="minDate" id="day" formControlName="day">
                <div *ngIf="appointmentAddForm.controls.day.invalid && (appointmentAddForm.controls.day.dirty || appointmentAddForm.controls.day.touched)" class="text-danger">
                  Gün zorunludur ve bugünden önce olamaz.
                </div>
              </div>
              <div class="form-group">
                <label for="startTime">Başlangıç Saati</label>
                <input type="time" class="form-control" id="startTime" formControlName="startTime">
                <div *ngIf="appointmentAddForm.controls.startTime.invalid && (appointmentAddForm.controls.startTime.dirty || appointmentAddForm.controls.startTime.touched)" class="text-danger">
                  Başlangıç saati geçerli bir saat olmalıdır (HH:mm).
                </div>
              </div>
              <div class="form-group">
                <label for="endTime">Bitiş Saati</label>
                <input type="time" class="form-control" id="endTime" formControlName="endTime">
                <div *ngIf="appointmentAddForm.controls.endTime.invalid && (appointmentAddForm.controls.endTime.dirty || appointmentAddForm.controls.endTime.touched)" class="text-danger">
                  Bitiş saati geçerli bir saat olmalıdır (HH:mm).
                </div>
                <div *ngIf="appointmentAddForm.errors?.invalidTimeRange && (appointmentAddForm.controls.startTime.dirty || appointmentAddForm.controls.startTime.touched || appointmentAddForm.controls.endTime.dirty || appointmentAddForm.controls.endTime.touched)" class="text-danger">
                  Başlangıç saati bitiş saatinden küçük olmalıdır.
                </div>
              </div>
              <div class="form-group">
                <label for="patientInterval">Hasta Aralığı (Dakika)</label>
                <input type="number" class="form-control" id="patientInterval" formControlName="patientInterval">
                <div *ngIf="appointmentAddForm.controls.patientInterval.invalid && (appointmentAddForm.controls.patientInterval.dirty || appointmentAddForm.controls.patientInterval.touched)" class="text-danger">
                  Hasta aralığı 1 ile 60 dakika arasında olmalıdır.
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              Kapat
            </button>
            <button [disabled]="!appointmentAddForm.valid" type="button" class="btn btn-primary" (click)="addSchedule()" >
              Kaydet
            </button>
          </div>
        </div>
      </div>
    </div>

  </section>
</app-blank>

  