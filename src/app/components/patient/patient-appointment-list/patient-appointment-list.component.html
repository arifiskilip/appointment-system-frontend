<app-blank pageName="Randevularım">
  <section class="content">
    <div class="container-fluid">
      <!-- Sekmeler -->
      <ul class="nav nav-tabs">
        <li class="nav-item">
          <a
            class="nav-link"
            [class.active]="tab === 'today'"
            (click)="setTab('today')"
            >Randevularım</a
          >
        </li>
        <li class="nav-item">
          <a
            class="nav-link"
            [class.active]="tab === 'past'"
            (click)="setTab('past')"
            >Geçmiş Randevularım</a
          >
        </li>
      </ul>

      <!-- Randevular -->
      <div class="row mt-3">
        <ng-container>
          <div class="containet">
            <table class="table table-striped projects">
              <thead>
        
              </thead>
              <tbody>
                @if(appointments && appointments.items.length>=1){
                  @for (appointment of appointments.items; track $index) {
                    <tr>
                      <td>1</td>
                      <td>
                        <span class="badge badge-primary" style="font-size: 1em;">
                          <i class="fas fa-calendar-alt" style="margin-right: 2px; font-size: 1em;"></i>
                          {{appointment.intervalDate |date:'dd-MM-yyyy HH:mm'}}
                        </span>
                        <br />
                        <span
                        [class]="
                          getBadgeStatusIcon(
                            appointment.appointmentStatus
                          ).css
                        "
                        >
                        <i class="fas fa-tag" style="margin-left: 2px;font-size: 1em;"></i>
                        {{
                          getBadgeStatusIcon(
                            appointment.appointmentStatus
                          ).value
                        }}</span
                      > 
                      </td>
                      <td>
                        <ul class="list-inline">
                          <p>
                            <i class="fas fa-hospital" style="margin-left: 0px;"></i>
                            Tobeto Hastahanesi
                          </p>
                          <p>
                            <i class="fas fa-code-branch" style="margin-left: 0px;"></i>
                            {{appointment.branchName}}
                          </p>
                        </ul>
                      </td>
                      <td class="project-state">
                        <p>
                          <i class="fas fa-user-doctor" style="margin-left: 0px;"></i>
                          {{appointment.doctorName}}
                        </p>
                      </td>
                      <td class="project-actions text-right">
                        <button class="btn btn-danger btn-sm" *ngIf="appointment.appointmentStatus !== 'Canceled' && appointment.appointmentStatus !== 'Completed'"  (click)="canceledAppointment(appointment.appointmentId)">
                          <i class="fas fa-times"> </i>
                          İptal Et
                        </button>
                      </td>
                    </tr>
                  }
                }
                @else {
                  <div class="alert alert-warning">Mevcut rapor bulunmamaktadır.</div>
                }
              </tbody>
            </table>
          </div>
        </ng-container>
      </div>
    </div>
    <!-- /.container-fluid -->
    <nav aria-label="Page navigation">
      <ul class="pagination justify-content-center">
        <li class="page-item">
          <a class="page-link" (click)="goToFirstPage()">İlk</a>
        </li>
        <li class="page-item">
          <a class="page-link" (click)="prevPage()">Önceki</a>
        </li>
        <li class="page-item" *ngFor="let pageNumber of getPageNumbers()">
          <a class="page-link" (click)="goToPage(pageNumber)" [ngClass]="{'active' : pageNumber===pageIndex}">{{ pageNumber }}</a>
        </li>
        <li class="page-item">
          <a class="page-link" (click)="nextPage()">Sonraki</a>
        </li>
        <li class="page-item">
          <a class="page-link" (click)="goToLastPage()">Son</a>
        </li>
      </ul>
    </nav>
  </section>
</app-blank>
